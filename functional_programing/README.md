# 쏙쏙 들어오는 함수형 코딩

![](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcawdhc%2Fbtrz8ulSM1C%2FmJ5LPTZmcXWhT7kpwrA6Y0%2Fimg.png)

TIL

## 함수형 프로그래밍을 잘하기 위해서

함수형 프로그래밍을 잘하기 위해서 코드 또는 요구 사항을을 액션, 계산, 데이터로 구분할수 있어야 한다.

## 액션

액션은 부수효과 (Side Effect) 가 있는 함수를 말하며 실행 시점과 실행 횟수에 따라 그 결과값이 달라질수 있다.

그렇기 때문에 액션을 가능한 __적게__ 사용하고 __작게__ 만든다.

## 계산

입력 값으로 출력 깂을 만드는 것이며 실행 시점과 횟수와 상관없이 항상 같은 입력 값에 대해서 같은 출력값을 돌려준다.

계산을 일반적으로 `순수함수` 라고도 부른다.

### 액션보다 계산이 좋은 이유

1. 테스트하기 쉽다.
2. 정적 분석이 쉽다.
3. 조합 하기가 좋다.

## 데이터

이벤트에 대한 사실을 기록

## 데이터

## 액션 개선 방법

- 액션은 암묵적인 입력 또는 출력을 가지고 있다.
- 계산은 암묵적인 입력 또는 출력이 없어야 한다.
- 전역 변수는 일반적으로 암묵적인 입력 또는 출력이 된다.
- 암묵적 입력을 인자로 바꿔라
- 암묵적 출력을 리턴 값을 바꿔라!

## 원칙 : 암묵적 입력과 출력은 적을수록 좋다.

암묵적 입력과 출력이 있는 함수는 아무 때나 실행할 수 없기 때문에 테스트하기 어렵다.

## 원칙 : 설계는 엉켜있는 코드를 푸는 것이다.

- 재사용하기 쉽다.
- 유지보수하기 어렵다.
- 테스트하기 쉽다.

## 카피-온-라이트 원칙 세 단계

1. 복사본 만들기
2. 복사본 변경하기(원하는 만큼)
3. 복사본 리턴하기

## 쓰기를 하면서 읽기도 하는 동작은 어떻게 해야 할까?

- 읽기와 쓰기 함수로 각각 분리한다.
- 함수에서 값을 두 개 리턴한다.

## 불변 데이터 구조를 읽는 것은 계산이다.

- 변경 가능한 값을 읽을 때마다 다른 값을 읽을 수도 있다. 따라서 변경 가능한 데이터를 읽는 것은 액션이다.
- 쓰기는 데이터를 바꾸기 때문에 데이터를 변경 가능한 구조로 만든다.
- 쓰기를 모두 없앴다면 데이터는 생성 이후 바뀌지 않습니다. 따라서 불변 데이터입니다.
- 어떤 데이터를 불변형으로 만들었다면 그 데이터에 모든 익기는 계산이다.
- 데이터 구조를 불변형으로 만들수록 코드에 더 많은 계산이 생기고 액션은 줄어든다.

## 바꿀 때마다 복사를 하면 너무 비효율적인 것이 아닌가요?

> 불변 데이터 구조는 충분히 빠릅니다.

- 언제든 최적화할 수 있습니다.
- 가비지 콜렉터는 매우 빠릅니다.
- 생각보다 많이 복사하지 않습니다.
- 함수령 프로그래밍 언어에는 빠른 구현체가 있습니다.

## Link

http://www.yes24.com/Product/Goods/108748841

